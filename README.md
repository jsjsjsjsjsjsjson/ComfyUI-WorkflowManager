# ComfyUI Workflow Manager

### 一个功能强大的ComfyUI工作流文件管理器插件

## 🎯 插件简介

ComfyUI Workflow Manager 是一个专为 ComfyUI 设计的高效工作流文件管理器插件。它提供了完整的文件系统操作功能，支持双视图模式（列表视图和网格视图），让您的工作流管理变得更加简单和高效。

<img width="605" height="537" alt="image" src="https://github.com/user-attachments/assets/7a74eca3-ff22-48f0-94e4-38b354f3e279" />


## ✨ 核心功能特性

### 📁 智能文件管理
- **双视图模式**：列表视图（紧凑布局）+ 网格视图（预览模式）
- **文件夹操作**：创建、重命名、删除、展开/折叠
- **工作流操作**：移动、复制、重命名、删除、预览
- **拖拽支持**：直观的拖放操作，支持跨文件夹移动

### 🖼️ 工作流预览系统
- **WebP预览图**：支持为工作流设置自定义预览图
- **右键更换**：通过右键菜单快速更换预览图
- **缓存管理**：智能缓存系统，支持预览图刷新
- **响应式显示**：预览图自动适应容器大小

### 🎨 现代化用户界面
- **侧边栏集成**：完美集成到ComfyUI侧边栏
- **紧凑列表视图**：默认列表视图，节省空间
- **网格预览视图**：支持预览图的网格布局
- **智能右键菜单**：根据文件类型和视图模式动态显示选项

### 🔍 高级浏览功能
- **面包屑导航**：清晰的目录层级导航
- **搜索过滤**：实时搜索工作流文件
- **排序系统**：按名称、时间、大小、类型排序
- **批量操作**：支持多选和批量处理

## 🚀 快速开始

### 1. 插件启动
- ComfyUI 启动后，插件自动在侧边栏创建"工作流管理器"标签页
- 默认显示列表视图，提供紧凑的文件浏览体验

### 2. 基本操作
- **浏览文件**：点击文件夹进入，使用面包屑返回上级
- **切换视图**：点击视图切换按钮在列表/网格视图间切换
- **预览模式**：在网格视图下开启预览图模式
- **文件操作**：右键菜单访问所有操作选项

### 3. 工作流预览
- **设置预览图**：右键工作流 → "更换预览图"
- **刷新预览**：右键工作流 → "刷新预览图"
- **预览格式**：支持WebP、PNG、JPG等图片格式

## 📂 目录结构管理

插件自动管理ComfyUI工作流目录：
```
ComfyUI/user/default/workflows/
├── 项目分类A/
│   ├── workflow1.json + workflow1.webp
│   └── workflow2.json + workflow2.webp
├── 项目分类B/
│   └── workflow3.json + workflow3.webp
└── 独立工作流/
    └── workflow4.json + workflow4.webp
```

## 🎮 操作指南

### 视图模式
- **列表视图**：紧凑布局，适合快速浏览和文件操作
- **网格视图**：大图标布局，支持预览图显示

### 快捷键
- **Ctrl+Click**：多选文件
- **F2**：重命名选中文件
- **Delete**：删除选中文件
- **Enter**：打开文件/文件夹
- **Backspace**：返回上级目录

### 拖拽操作
- **拖拽到文件夹**：移动工作流文件
- **Ctrl+拖拽**：复制工作流文件
- **拖拽到画布**：直接加载工作流到ComfyUI

### 右键菜单
- **文件操作**：打开、重命名、删除、属性
- **预览管理**：刷新预览图、更换预览图
- **文件管理**：剪切、复制、粘贴
- **文件夹操作**：新建文件夹、展开/折叠

## 🔧 技术架构

### 后端技术
- **Python 3.8+**：基于aiohttp的异步Web服务
- **RESTful API**：完整的文件操作API接口
- **安全验证**：路径验证、文件类型检查
- **错误处理**：完善的异常处理和日志记录

### 前端技术
- **原生JavaScript**：无依赖的轻量级实现
- **ComfyUI集成**：深度集成ComfyUI的API和事件系统
- **响应式设计**：适配不同屏幕尺寸和分辨率
- **性能优化**：懒加载、缓存管理、防抖处理

### 核心特性
- **双视图引擎**：列表视图和网格视图的智能切换
- **预览图系统**：WebP格式的预览图管理和缓存
- **拖拽引擎**：跨视图、跨文件夹的拖拽操作
- **事件系统**：模块间通信和状态同步

## 📋 系统要求

- **ComfyUI**：最新稳定版本
- **Python**：3.8 或更高版本
- **浏览器**：支持现代Web标准（Chrome、Firefox、Safari、Edge）
- **内存**：建议2GB以上可用内存

## 🐛 常见问题

### Q: 预览图不显示？
A: 确保在网格视图下开启预览模式，检查工作流是否有对应的.webp文件

### Q: 右键菜单被遮挡？
A: 插件已优化菜单位置，会自动调整确保完全可见

### Q: 列表视图太紧凑？
A: 可以切换到网格视图获得更宽松的布局

### Q: 如何批量操作文件？
A: 使用Ctrl+Click多选文件，然后通过右键菜单进行批量操作

## 🤝 贡献与反馈

欢迎提交问题报告、功能建议和代码贡献！

- **GitHub Issues**：报告bug和功能请求
- **Pull Requests**：提交代码改进
- **功能讨论**：分享使用体验和建议

## 📄 许可证

本项目采用开源许可证，详情请查看 LICENSE 文件。

---

**让ComfyUI工作流管理变得简单高效！** 🎨✨

*开发维护：yicheng / 亦诚* 










